{% extends 'base.html.twig' %}

{% block title %}{{ course.title }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('course') }}
{% endblock %}

{% block main %}
  <main class="course-container">
    <header class="course-header">
      <div class="course-header__wrapper">
        <div class="course-header__content">
          <h1>{{ course.title }}</h1>
          {{ course.description|raw }}
          <div class="course-header__badges">
            <p>Leçons disponibles : {{ lessons|length }}</p>
            <span class="{{ course.badge.cssClass }}">{{ course.badge.name }}</span>
            <span class="{{ course.badge.cssClass }}"><strong>€ {{ course.price }}</strong></span>
            <a href="#">
              <i class="fa fa-shopping-cart" aria-hidden="true"></i>
              Acheter ce cours complet
            </a>
          </div>
        </div>
        <div class="course-header__image">
          <img src="{{ asset('images/courses/' ~ course.image) }}" alt="themes" />
        </div>
      </div>
    </header>
    <section class="lessons-container">
      {% if lessons %}
        {% for lesson in lessons %}
          <div class="lessons-card">
            <div class="lessons-card__image">
              <img src="{{ lesson.image ? asset('images/lessons/' ~ lesson.image) : asset('images/placeholder.jpg') }}">
            </div>
            <div class="lessons-card__content">
              <h2>{{ lesson.title }}</h2>
              {{ lesson.description|raw }}
              <div class="lessons-card__badges">
                <p>€ {{ lesson.price }}</p>
                {% if lesson.badge %}
                  <span class="{{ lesson.badge.cssClass }}">{{ lesson.badge.name }}</span>
                {% endif %}
              </div>
              <a href="" class="btn">
                <i class="fa-solid fa-cart-plus"></i>
                Acheter cette leçon
              </a>
            </div>
          </div>
        {% endfor %}
      {% else %}
        {{ include('partials/flash_messages.html.twig') }}
      {% endif %}
    </section>
  </main>
{% endblock %}
